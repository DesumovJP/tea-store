# Налаштування Telegram бота для зворотного зв'язку

## Крок 1: Створення Telegram бота

1. Відкрийте Telegram та знайдіть бота [@BotFather](https://t.me/botfather)
2. Надішліть команду `/newbot`
3. Введіть назву для вашого бота (наприклад: "Tea Store Support")
4. Введіть username для бота (наприклад: "tea_store_support_bot")
5. Скопіюйте **TOKEN** бота (виглядає як `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)

## Крок 2: Отримання Chat ID адміністратора

1. Надішліть будь-яке повідомлення вашому боту
2. Відкрийте в браузері: `https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates`
3. Знайдіть в JSON відповіді поле `"chat":{"id":123456789}` - це ваш Chat ID

## Крок 3: Налаштування змінних середовища

Створіть файл `.env` в корені проекту:

```env
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=123456789
WEBSOCKET_PORT=3001
```

## Крок 4: Встановлення залежностей

```bash
npm install
```

## Крок 5: Запуск сервісів

```bash
# Запуск всіх сервісів одночасно
npm run dev

# Або окремо:
npm run websocket  # WebSocket сервер
npm run telegram   # Telegram бот
```

## Крок 6: Тестування

1. Відкрийте сайт та натисніть на кнопку зворотного зв'язку
2. Заповніть форму та відправте повідомлення
3. Перевірте, чи прийшло повідомлення в Telegram
4. Відповідь на повідомлення в Telegram має прийти користувачу на сайт

## Як це працює

1. **Користувач** відправляє повідомлення через форму на сайті
2. **API** відправляє повідомлення в Telegram адміністратору
3. **Адміністратор** відповідає на повідомлення в Telegram (Reply)
4. **Telegram бот** отримує відповідь та відправляє її користувачу через WebSocket
5. **Користувач** бачить відповідь в реальному часі на сайті

## Структура файлів

```
├── websocket-server.js    # WebSocket сервер для real-time комунікації
├── telegram-bot.js        # Telegram бот для обробки повідомлень
├── index.js              # Головний файл для запуску всіх сервісів
├── package.json          # Залежності та скрипти
└── .env                  # Змінні середовища (створіть самостійно)
```

## Можливі проблеми

### WebSocket не підключається
- Перевірте, чи запущений WebSocket сервер на порту 3001
- Перевірте налаштування файрволу

### Telegram бот не відповідає
- Перевірте правильність TOKEN та Chat ID
- Переконайтеся, що бот не заблокований
- Перевірте, чи відправляли повідомлення боту перед отриманням Chat ID

### Повідомлення не доставляються
- Перевірте з'єднання з інтернетом
- Переконайтеся, що всі сервіси запущені
- Перевірте логи в консолі
