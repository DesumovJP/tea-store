# Виправлення дозволів для модерації відгуків

## Проблема
Отримуєте помилку "Failed to approve review" при спробі схвалити або видалити відгук в адмін панелі.

## Причина
У Strapi не налаштовані дозволи для операцій з відгуками (update, delete) для API токену.

## Рішення

### 1. Відкрийте Strapi Admin Panel
Перейдіть до `http://localhost:1337/admin`

### 2. Налаштуйте дозволи для API Token

#### Крок 1: Створіть або знайдіть API Token
1. **Settings** → **API Tokens**
2. Якщо у вас немає токену, створіть новий:
   - **Name**: "Admin Token"
   - **Description**: "Token for admin operations"
   - **Token duration**: "Unlimited"
   - **Token type**: "Full access" (рекомендовано для адміністратора)

#### Крок 2: Налаштуйте дозволи для Review
1. **Settings** → **API Tokens** → **Edit your token**
2. У розділі **Permissions** знайдіть **Review**
3. Встановіть наступні дозволи:
   - ✅ **find** (читання списку відгуків)
   - ✅ **findOne** (читання одного відгуку)
   - ✅ **create** (створення відгуків)
   - ✅ **update** (оновлення відгуків) ← **ВАЖЛИВО!**
   - ✅ **delete** (видалення відгуків) ← **ВАЖЛИВО!**

#### Крок 3: Налаштуйте дозволи для Product
1. У тому ж токені знайдіть **Product**
2. Встановіть:
   - ✅ **find**
   - ✅ **findOne**
   - ✅ **create**
   - ✅ **update**
   - ✅ **delete**

#### Крок 4: Налаштуйте дозволи для Category
1. У тому ж токені знайдіть **Category**
2. Встановіть:
   - ✅ **find**
   - ✅ **findOne**
   - ✅ **create**
   - ✅ **update**
   - ✅ **delete**

### 3. Оновіть API Token у .env файлі
Скопіюйте новий токен з Strapi Admin Panel та оновіть у `frontend/.env.local`:

```env
STRAPI_API_TOKEN=your_new_token_here
```

### 4. Перезапустіть Next.js
```bash
cd frontend
yarn dev
```

## Альтернативне рішення (якщо не працює)

### Варіант 1: Використовуйте Full Access Token
1. **Settings** → **API Tokens** → **Create new token**
2. **Token type**: "Full access"
3. Це дасть доступ до всіх операцій

### Варіант 2: Перевірте дозволи для Public ролі
1. **Settings** → **Users & Permissions Plugin** → **Roles** → **Public**
2. У розділі **Review** встановіть:
   - ✅ **find**
   - ✅ **findOne**
   - ✅ **create**
   - ✅ **update** ← **ВАЖЛИВО!**
   - ✅ **delete** ← **ВАЖЛИВО!**

## Перевірка

Після налаштування дозволів:
1. Спробуйте схвалити відгук в адмін панелі
2. Перевірте консоль браузера (F12) для детальних логів
3. Перевірте термінал Next.js для логів сервера

## Логування

Додано детальне логування в адмін панель:
- Логи запитів до Strapi
- Статус відповідей
- Детальні повідомлення про помилки

Перевірте консоль браузера для діагностики проблем.
